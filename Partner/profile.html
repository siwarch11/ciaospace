<script>
    if(!localStorage.getItem("idPartner"))
    {
      location.replace("signin.html");
    }
  </script>
<!DOCTYPE html>

<html lang="en-US">

<!-- Mirrored from themestarz.net/html/accommodo/profile.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 21 Apr 2022 11:37:55 GMT -->
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="ThemeStarz">

    <link href="assets/fonts/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="assets/fonts/elegant-fonts.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700,900,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="assets/css/zabuto_calendar.min.css" type="text/css">
    <link rel="stylesheet" href="assets/css/owl.carousel.css" type="text/css">
    <link rel="stylesheet" href="assets/css/style.css" type="text/css">

    <title>Ciao space</title>

</head>

<body>
<div class="page-wrapper">
    <div id="page-header">
        <header>
            <div class="container">
                <div class="secondary-nav">
                    <div class="nav-trigger"><a data-toggle="collapse" href="#secondary-nav" aria-expanded="false" aria-controls="secondary-nav"><i class="fa fa-user"></i></a></div>
                    <div id="secondary-nav">
                        <nav>
                            <div class="left opacity-60">
                                
                                <a href="#"><i class="fa fa-phone"></i>+1 781-903-1047</a>
                                <a href="mailto:hello@example.com"><i class="fa fa-envelope"></i>hello@ciaospace.com</a>
                            </div>
                            <!--end left-->
                            <div class="right">
                                <div class="element">
                                    
                                </div>
                                <!--end element-->
                                <div class="element">
                                    <a href="C:/Users/Client/Desktop/pfe/Partner/signin.html" >Sign In</a>
                                </div>
                                <!--end element-->
                                <div class="element">
                                    <a href="C:/Users/Client/Desktop/pfe/Partner/signup.html" >Register</a>
                                </div>
                                <!--end element-->
                                <div class="element">
                                    
                                </div>
                                <!--end element-->
                            </div>
                            <!--end right-->
                        </nav>
                    </div>
                </div>
                <!--end secondary-nav-->
            </div>
            <!--end container-->
            <hr>
            <div class="container">
                <div class="primary-nav">
                    <div class="left">
                        <a href="index.html" id="brand"><img src="assets/img/logo.png" alt=""></a>
                        <a class="nav-trigger" data-toggle="collapse" href="#primary-nav" aria-expanded="false" aria-controls="primary-nav"><i class="fa fa-navicon"></i></a>
                    </div>
                    <!--end left-->
                    <div class="right" >
                        <nav id="primary-nav">
                            <ul>
                                <li ><a href="index.html">Home</a></li>
                               
                                <li>
                                    <a href="listing.html">Offers</a>
                                   
                                </li>
                                <li><a href="addoffer.html">Add Offers</a></li>
                                <li><a href="myoffers.html">My Offers</a></li>
                                <li><a href="reservations.html">Reservations</a></li>
                                
                                <li><a href="contact-us.html">Contact Us</a></li>
                                <li class="active">
                                    <a href="#" class="has-child">My Account</a>
                                <ul class="child-nav">
                                        <li class="active"><a href="profile.html" id="usernamePartner">Profil</a></li>
                                        <li><a href="signin.html" onclick="logout()">Logout</a></li>
                                       
                                    </ul>
                                </li>
                                <li>
                                    <a href="#" class="has-child">More</a>
                                <ul class="child-nav">
                                        <li><a class="fa fa-fw fa-hotel" href="hotel.html">Hotels</a></li>
                                        <li><a class="fa fa-fw fa-cutlery " href="restaurant.html">Restaurants</a></li>
                                       <li><a  class="fa fa-fw fa-calendar" href="event.html">Events</a></li>
                                       <li><a class="fa fa-fw fa-beer" href="bar.html">Nightlife</a></li>
                                       <li><a class="fa fa-fw fa-list-alt" href="other.html">Others</a></li>




                                    </ul>
                                </li>
                            </ul>
                        </nav>
                        <!--end nav-->
                    </div>
                    <!--end right-->
                </div>
                <!--end primary-nav-->
            </div>
            <!--end container-->
        </header>
        <!--end header-->
    </div>
    <!--end page-header-->

    <div id="page-content">
        <div class="container">
            <ol class="breadcrumb">
                <li><a href="#">Home</a></li>
                <li><a href="#">Listing</a></li>
                <li class="active">Detail</li>
            </ol>
            <!--end breadcrumb-->
            <div class="main-content">
                <div class="title">
                    
                    <h1><a href="profile.html">Profile</a></h1>
                    
                </div>
                <!--end title-->
                <div class="row">
                    <div class="col-md-9">
                        
                            <div class="row">
                                <!--Profile Picture-->
                                <div class="col-md-3 col-sm-3">
                                    <section>

                                       
                                        <h3 class="profile-username text-center" id="username">Nina Mcintire</h3>
                                        <div  id="i" class="profile-picture single-file-preview">
                                            
                                            
                                            <div class="input">
                                               
                                          <input type="text" onclick="send()" id="i" class="form-control" placeholder="Click to upload a picture"/>
                                                
                                            </div>
                                        </div>
                                    </section>
                                </div>
                                <!--end col-md-3-->

                                <!--Contact Info-->
                                <div class="col-md-9 col-sm-9">
                                    <section>
                                        <h3>Personal Info</h3>
                                        <form onsubmit="return false">
                                        <div class="row">
                                           
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label for="lname">Company Name</label>
                                                    <input type="text" class="form-control" id="companyName"  >
                                                </div>
                                            </div>
                                                <!--end form-group-->
                                                <div class="col-md-6 col-sm-6">
                                                    <div class="form-group">
                                                        <label for="fname">Phone Number</label>
                                                        <input type="text" class="form-control" id="phoneNumber"  >
                                                    </div>
                                                </div>
                                           
                                            <!--end col-md-3-->
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label for="lname">Email </label>
                                                    <input type="email" class="form-control" id="email" name="email" >
                                                </div>
                                                <!--end form-group-->
                                            </div>
                                            <!--end col-md-3-->
                                            <div class="col-md-6 col-sm-6">
                                                <div class="form-group">
                                                    <label for="password">Password</label>
                                                    <input type="text" class="form-control" id="password" name="password" >
                                                </div>
                                                <!--end form-group-->
                                            </div>
                                            <!--end col-md-3-->
                                           
                                        </div>
                                    </section>
                                    
                                    
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-large btn-primary btn-rounded"  onclick="update()" value="Update">Save Changes</button>
                                    </div> 
                                    <!-- end form-group -->
                                </div>
                                <!--end col-md-6-->
                            </div>
                        </form>
                    </div>
                    <!--Password-->
                   
                    <!-- end col-md-3-->
                </div>
            </div>
            <!--end main-content-->
        </div>
        <!--end container-->
    </div>
    <!--end page-content-->

    <footer id="page-footer">
        
        <!--end row-one-->
        <div class="row-two clearfix">
            <div class="container">
                <div class="copyright pull-left">(C) 2016 Your Company, All Rights Reserved</div>
                <div class="footer-nav pull-right">
                    <a href="index.html">Home</a>
                    <a href="about-us.html">About Us</a>
                    <a href="listing.html">Listing</a>
                    <a href="contact-us.html">Contact Us</a>
                </div>
            </div>
            <div class="bg-transfer"><img src="assets/img/footer.jpg" alt=""></div>
        </div>
        <!--end row-two-->
    </footer>
    <!--end page-footer-->
</div>
<!--end page-wrapper-->
<a href="#page-header" class="to-top scroll" data-show-after-scroll="600"><i class="arrow_up"></i></a>

<!-- Modal -->
<script>
    function logout(){
      var d = window.confirm("want to LogOut?");
      if (d == true)
      {
        localStorage.removeItem("idPartner");
      }
    }
  </script>
<script>
   
 var c =localStorage.getItem("idPartner");
  console.log(c);

  // Post a user
  var url3 = "http://192.168.37.220:3000/partners/" + c ;
  var xhr3 = new XMLHttpRequest();
  xhr3.open("GET", url3, true);

  xhr3.onload = function () {
      var admins = JSON.parse(xhr3.responseText);
      if (xhr3.readyState == 4 && xhr3.status == "200") {
          document.getElementById("usernamePartner").innerHTML = admins.companyName;
          document.getElementById("companyName").value = admins.companyName;
          document.getElementById("email").value = admins.email;
          document.getElementById("password").value = admins.password;
          
      } else {

          console.log("error");
      }
  }

  xhr3.send(null);
//`<a href="update.html?id=`+i._id+`">Update</a>`
  function update(){
    var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
    if(document.getElementById("companyName").value && document.getElementById("number").value
    &&document.getElementById("date").value){
    if(document.getElementById("email").value.match(mailformat)){

    var c =localStorage.getItem("idPartner");
          
              var url = "http://192.168.37.220:3000/partners/"+c;
                              
              var data = {};
              data.companyName = document.getElementById("companyName").value;
              data.email = document.getElementById("email").value;
              data.password = document.getElementById("password").value;
                                                      
              var json = JSON.stringify(data);
              var xhr = new XMLHttpRequest();
              xhr.open("PUT", url, true);
              xhr.setRequestHeader('Content-type','application/json; charset=utf-8');
              xhr.onload = function () {
                  var admins = JSON.parse(xhr.responseText);
                  if (xhr.readyState == 4 && xhr.status == "200") {
                      alert("Profile Updated!");
                      location.replace("profile.html?id=" + c);
                  } else {
                      console.error(admins);
                      location.replace("profile.html?id=" + c);
                  }
              }
              xhr.send(json);
         
  }
  else{
    alert("please enter a valid email")
  }
  }
  else{
    alert("please fill all fields")
  }
    }
</script>
<script>
    function send() {
      var i = document.getElementById("i");
      const apikey = "AQwsvBPYPQ5qwmtB5pCBoz";
      const client = filestack.init(apikey);
      const options = {
        maxFiles: 20,
        uploadInBackground: false,
        onOpen: () => console.log("opened!"),
        onUploadDone: (res) => (i.value = res.filesUploaded[0].url),
      };
      client.picker(options).open();
    }
  </script>
  
  
<!--end modal-->
<script src="https://static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>

<script type="text/javascript" src="assets/js/jquery-2.2.1.min.js"></script>
<script type="text/javascript" src="assets/js/jquery-migrate-1.2.1.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;libraries=places"></script>
<script type="text/javascript" src="assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.validate.min.js"></script>
<script type="text/javascript" src="assets/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="assets/js/icheck.min.js"></script>
<script type="text/javascript" src="assets/js/owl.carousel.js"></script>
<script type="text/javascript" src="assets/js/masonry.pkgd.min.js"></script>

<script type="text/javascript" src="assets/js/maps.js"></script>
<script type="text/javascript" src="assets/js/custom.js"></script>

<!--[if lte IE 9]>
<script src="assets/js/ie.js"></script>
<![endif]-->
<script>
   
    var c =localStorage.getItem("idPartner");
     console.log(c);
   
     // Post a user
     var url3 = "http://192.168.37.220:3000/partners/" + c ;
     var xhr3 = new XMLHttpRequest();
     xhr3.open("GET", url3, true);
   
     xhr3.onload = function () {
         var admins = JSON.parse(xhr3.responseText);
         if (xhr3.readyState == 4 && xhr3.status == "200") {
             document.getElementById("username").innerHTML = admins.companyName;
          document.getElementById("companyName").value = admins.companyName;
             document.getElementById("email").value = admins.email;
             document.getElementById("password").value = admins.password;
             document.getElementById("phoneNumber").value = admins.phoneNumber;

         } else {
   
             console.log("error");
         }
     }
   
     xhr3.send(null);
   //`<a href="update.html?id=`+i._id+`">Update</a>`
     function update(){
       var c =localStorage.getItem("idUser");
             
                 var url = "http://192.168.37.220:3000/users/"+c;
                                 
                 var data = {};
                 document.getElementById("email").value = admins.email;
             document.getElementById("password").value = admins.password;
             document.getElementById("phoneNumber").value = admins.phoneNumber;
                                                         
                 var json = JSON.stringify(data);
                 var xhr = new XMLHttpRequest();
                 xhr.open("PUT", url, true);
                 xhr.setRequestHeader('Content-type','application/json; charset=utf-8');
                 xhr.onload = function () {
                     var admins = JSON.parse(xhr.responseText);
                     if (xhr.readyState == 4 && xhr.status == "200") {
                         alert("Profile Updated!");
                         location.replace("profile.html?id=" + c);
                     } else {
                         console.error(admins);
                         location.replace("profile.html?id=" + c);
                     }
                 }
                 xhr.send(json);
            
     }
   </script>
 <script>
     function logout(){
       var d = window.confirm("want to LogOut?");
       if (d == true)
       {
         localStorage.removeItem("idPartner");
       }
     }
   </script>
<script>
    function send() {
      var i = document.getElementById("i");
      const apikey = "AQwsvBPYPQ5qwmtB5pCBoz";
      const client = filestack.init(apikey);
      const options = {
        maxFiles: 20,
        uploadInBackground: false,
        onOpen: () => console.log("opened!"),
        onUploadDone: (res) => (i.value = res.filesUploaded[0].url),
      };
      client.picker(options).open();
    }
  </script>
  <script>
    var c =localStorage.getItem("idPartner");
     console.log(c);
 
     // Post a user
     var url4 = "http://192.168.37.220:3000/partners/" + c ;
     var xhr4 = new XMLHttpRequest();
     xhr4.open("GET", url4, true);
 
     xhr4.onload = function () {
         var admins = JSON.parse(xhr4.responseText);
         if (xhr4.readyState == 4 && xhr4.status == "200") {
             document.getElementById("usernamePartner").innerHTML =admins.companyName ;
             document.getElementById("i").innerHTML =`<img class="d-block"src="`+admins.image+`"alt="">`;
           
         } else {
 
             console.log("error");
         }
     }
 
     xhr4.send(null);
 </script>
</body>
